{% if use == 'list' %}
<form id="app-collection-form">
	<table class="table table-striped table-hover table-bordered">
		<thead>
			<tr>
				<th>ICON</th>
				<td>名称(BundleId)</td>
                <th>国家</th>
				<th>排序 | 语言</th>
				<th>操作</th>
			</tr>
		</thead>
		<tbody>
			{% for a in collection_list %}
			<tr>
				<td><img style="width:40px; height:40px" src="{{ collection_list[a][0].get('icon', '') }}" /></td>
				<td><strong>{{ collection_list[a][0].get('trackName', '') }}</strong><br />{{ a }}</td>
				<td>{% for country in a['country'] %} {{country}} {% endfor %}</td>
                <td>
                  <ul class='nav'>
                    {% for item in collection_list[a] %}
                    <li>
                      <span>
                      {{ item['sort'] }} | {% for lang in item['language'] %} {{lang}}  {% endfor %}
                      </span>
                    </li>
                    {% endfor %}
                  </ul>
                </td>
				<td>
                  <a class="btn blue" href="javascript:void(0);" onclick="openModal('{{collection_list[a][0].get('ID', '')}}')" >编辑</a>
                  <!-- <a class="btn red" data-toggle="modal" href="#confirm_del_box_{{collection_list[a][0].get('ID', '')}}">删除</a> -->
                  <!-- <div id="confirm_del_box_{{collection_list[a][0].get('ID', '')}}" class="modal hide fade" tabindex="-1" data-backdrop="static" data-keyboard="false"> -->
                  <!--     <div class="modal-body"> -->
                  <!--         <p>确定要删除吗?</p> -->
                  <!--     </div> -->
                  <!--     <div class="modal-footer"> -->
                  <!--         <button type="button" data-dismiss="modal" class="btn">取消</button> -->
                  <!--         <button type="button" data-dismiss="modal" class="btn red" onclick="deleteCollectionItem('{{identifier}}', '{{collection_list[a][0].get('ID', '')}}')">确定</button> -->
                  <!--     </div> -->
                  <!-- </div> -->
				</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
</form>
{% elif use == 'edit' %}
    <div class="modal-header">
        <h3>添加到应用集合</h3>
    </div>
    <div class="modal-body form">
        <form action="#"  id="edit_form" name="edit_form" class="form-horizontal">
            <div class="control-group">
                <label class="control-label">编辑</label>
                <div id="edit_res" class="controls">
                  {% for item in collection %}
                  <span class='tag'>
                    <span>
                      {{ item['sort'] }} | {% for lang in item['language'] %} {{lang}}  {% endfor %}
                    </span>
                    <input type='hidden' name='edit_res' value="{{ item['sort'] }} | {% for lang in item['language'] %} {{lang}}  {% endfor %}" class='m-wrap small' />
                    <a href='javascript:void(0);' title='Remove'>x</a>
                  </span>
                  {% endfor %}
                </div>
              </div>
            <div class="control-group">
                <label class="control-label">排序</label>
                <div class="controls">
                    <input type="text" placeholder="small" name="edit_sort" value="0" class="m-wrap small" />
                    <span class="help-inline"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">语言 (不限语言不选)</label>
                <div class="controls">
                    {% for lang in lang_options %}
                    <label class="checkbox">
                        <input type="checkbox" name="edit_language" value="{{ lang['code'] }}" /> {{ lang['name'] }}
                    </label>
                    {% endfor %}
                </div>
                <div class="controls">
                    <label class="radio">
                        <input type="radio" name="all" class="alllang" data-attr="edit_language"/>全选
                    </label>
                    <label class="radio">
                        <input type="radio" name="all" class="noneofthem" data-attr="edit_language"/>反选
                    </label>
                </div>
            </div>
            <!-- <div class="control-group"> -->
            <!--     <label class="control-label">国家 (不限国家不选)</label> -->
            <!--     <div class="controls"> -->
            <!--         {% for country in country_options %} -->
            <!--         <label class="checkbox"> -->
            <!--             <input type="checkbox" name="edit_country" value="{{ country['code'] }}" /> {{ country['name'] }} -->
            <!--         </label> -->
            <!--         {% endfor %} -->
            <!--     </div> -->
            <!-- </div> -->
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn blue" onclick="addToRes()">添加</button>
        <button type="button" data-dismiss="modal" class="btn">取消</button>
        <button type="button" data-dismiss="modal" class="btn red" onclick="addToCollection('{{_id}}')">保存</button>
    </div>
{% block scripts %}
<script type="text/javascript">
$(document).ready(function(){
      node_all = ['el', 'en', 'zh-Hans', 'vi', 'ca', 'it', 'zh-Hant', 'ar', 'cs', 'id', 'es', 'en-GB', 'ru', 'nl', 'pt', 'nb', 'tr', 'th', 'ro', 'pl', 'fr', 'uk','hr', 'de', 'da', 'fa', 'pt-BR', 'fi', 'hu', 'ja', 'he', 'pt-PT', 'ko','sv', 'km', 'sk', 'ms'];
	$(".alllang").click(function(){
        node = node_all;
		var name = $(this).attr('data-attr')
		$("input[name=" + name + "]").attr("checked", "checked")
		$("input[name=" + name + "]").parent().addClass("checked")
	})

	$(".noneofthem").click(function(){
        node = $(node_all).not(node).get();
		var name = $(this).attr('data-attr')
		var name_array = $("input[name=" + name + "]")
		for(var i=0;i<name_array.length;i++){
			if($(name_array[i]).attr("checked") == "checked"){
				$(name_array[i]).removeAttr("checked")
				$(name_array[i]).parent().removeClass("checked")
			}else{
				$(name_array[i]).attr("checked", "checked")
				$(name_array[i]).parent().addClass("checked")
			}
		}
	})

})
</script>
{% endblock %}
{% endif %}
